# ì˜¤ëŠ˜ë„ í™”ì´íŒ…ì´ë‹·â¤ï¸â€ðŸ”¥!
## ì–´ì œ ëª»í•œì¼ í™•ì¸í•˜ê¸°
```tasks
not done
scheduled before today
```
- [x] ê²½í‘œë‹˜ ê³µìœ  -> âœ… 2024-11-20
- [x] Calendaer insert event API: [Events: insert Â |Â  Google Calendar Â |Â  Google for Developers](https://developers.google.com/calendar/api/v3/reference/events/insert?hl=ko#javascript) âœ… 2024-11-20
- [x] í…ŒìŠ¤íŠ¸ ì•„ì´ë””ì— ê²½í‘œë‹˜ ì´ë©”ì¼ ì¶”ê°€. âœ… 2024-11-19

- êµ¬ê¸€ ìº˜ë¦°ë” ì¼ì • ì¶”ê°€ í•˜ëŠ” ë°©ë²•
	- [events.insert](https://developers.google.com/calendar/api/v3/reference/events/insert): ë³µìž¡í•˜ê³  ì„¸ë¶€ì ì¸ ì˜µì…˜ ì œì–´ ê°€ëŠ¥. JSON ìš”ì²­ (í˜„ìž¬ ì‚¬ìš©ì¤‘)
	- [events.quickAdd](https://developers.google.com/calendar/api/v3/reference/events/quickAdd): text ìš”ì²­ (í™•ì¸ í•„ìš”)

```javascript
// Refer to the JavaScript quickstart on how to setup the environment:
// https://developers.google.com/calendar/quickstart/js
// Change the scope to 'https://www.googleapis.com/auth/calendar' and delete any
// stored credentials.

var event = {
  'summary': 'Google I/O 2015',
  'location': '800 Howard St., San Francisco, CA 94103',
  'description': 'A chance to hear more about Google\'s developer products.',
  'start': {
    'dateTime': '2015-05-28T09:00:00-07:00',
    'timeZone': 'America/Los_Angeles'
  },
  'end': {
    'dateTime': '2015-05-28T17:00:00-07:00',
    'timeZone': 'America/Los_Angeles'
  },
  'recurrence': [
    'RRULE:FREQ=DAILY;COUNT=2'
  ],
  'attendees': [
    {'email': 'lpage@example.com'},
    {'email': 'sbrin@example.com'}
  ],
  'reminders': {
    'useDefault': false,
    'overrides': [
      {'method': 'email', 'minutes': 24 * 60},
      {'method': 'popup', 'minutes': 10}
    ]
  }
};

var request = gapi.client.calendar.events.insert({
  'calendarId': 'primary',
  'resource': event
});

request.execute(function(event) {
  appendPre('Event created: ' + event.htmlLink);
});
```
- [ ] êµ¬ê¸€ ìº˜ë¦°ë” í•„ìš”í•œ ê¶Œí•œë§Œ ì“°ê¸° (í˜„: Calendar ì „ì²´ -> í›„: Calendar ì“°ê¸° ê¸°ëŠ¥ë§Œ) (ì¡°íšŒ í•„ìš”í•œê°€??)
- [ ] ì½”ë“œ ì •ë¦¬

```
// ... existing code ...

// QuickAddë¡œ ì´ë²¤íŠ¸ë¥¼ ì¶”ê°€í•˜ëŠ” í…ŒìŠ¤íŠ¸ í•¨ìˆ˜
async function addToCalendarQuickAdd(text) {
  try {
    const token = await new Promise((resolve, reject) => {
      chrome.identity.getAuthToken({ interactive: true }, function(token) {
        if (chrome.runtime.lastError) {
          reject(chrome.runtime.lastError);
        } else {
          resolve(token);
        }
      });
    });

    const response = await fetch(
      `https://www.googleapis.com/calendar/v3/calendars/primary/events/quickAdd?text=${encodeURIComponent(text)}`,
      {
        method: 'POST',
        headers: {
          'Authorization': `Bearer ${token}`,
          'Content-Type': 'application/json'
        }
      }
    );

    if (!response.ok) {
      throw new Error('QuickAdd ì¼ì • ì¶”ê°€ ì‹¤íŒ¨');
    }

    const result = await response.json();
    console.log('QuickAdd ê²°ê³¼:', result);
    
    // ì„±ê³µ ì•Œë¦¼ í‘œì‹œ
    chrome.notifications.create({
      type: 'basic',
      iconUrl: 'icon.png',
      title: 'QuickAdd ì¼ì • ì¶”ê°€ ì™„ë£Œ',
      message: `"${text}" ì¼ì •ì´ ìº˜ë¦°ë”ì— ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.`
    });

    return result;
  } catch (error) {
    console.error('QuickAdd ì¶”ê°€ ì¤‘ ì—ëŸ¬:', error);
    throw error;
  }
}

// í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•œ ë©”ì‹œì§€ í•¸ë“¤ëŸ¬ ì¶”ê°€
chrome.runtime.onMessage.addListener((request, sender, sendResponse) => {
    // ... existing code ...

    if (request.action === 'testQuickAdd') {
        addToCalendarQuickAdd(request.text)
            .then(result => sendResponse({ success: true, result }))
            .catch(error => sendResponse({ success: false, error: error.message }));
        return true;
    }
});
```

